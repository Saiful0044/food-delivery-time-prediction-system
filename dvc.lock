schema: '2.0'
stages:
  data_cleaning:
    cmd: python src/data/data_cleaning.py
    deps:
    - path: data/raw/swiggy.csv
      hash: md5
      md5: 0b050b37dfe6cfbfaa18d7cb4e454377
      size: 7772212
    - path: src/data/data_cleaning.py
      hash: md5
      md5: bd89f58be955aaef873840698f27a0fc
      size: 9644
    outs:
    - path: data/cleaned/cleaned_data.csv
      hash: md5
      md5: 459a248ce6e8d0a9136bd5aaa98260fe
      size: 5013256
  data_preparation:
    cmd: python src/data/data_preparation.py
    deps:
    - path: data/cleaned/cleaned_data.csv
      hash: md5
      md5: 459a248ce6e8d0a9136bd5aaa98260fe
      size: 5013256
    - path: src/data/data_preparation.py
      hash: md5
      md5: e7c200262b73108642826fd28984e251
      size: 2662
    params:
      params.yaml:
        Data_Preparation.random_state: 42
        Data_Preparation.test_size: 0.2
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: 1aa258b1c6a75155ecb180d1cb311391
      size: 1002065
    - path: data/interim/train.csv
      hash: md5
      md5: c2e7342c8ef234de2b0ee6d3e96f3e3e
      size: 4008233
  data_preprocessing:
    cmd: python src/features/data_preprocessing.py
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 1aa258b1c6a75155ecb180d1cb311391
      size: 1002065
    - path: data/interim/train.csv
      hash: md5
      md5: c2e7342c8ef234de2b0ee6d3e96f3e3e
      size: 4008233
    - path: src/features/data_preprocessing.py
      hash: md5
      md5: 4a75611c6b4059b6ad02294cff0e1d05
      size: 5872
    outs:
    - path: data/processed/test_trans.csv
      hash: md5
      md5: 4518a428a6d455c94fb53c5a3a5120ee
      size: 1176323
    - path: data/processed/train_trans.csv
      hash: md5
      md5: faaac3c5b94a404e2288070427b041f5
      size: 4675159
    - path: models/preprocessor.joblib
      hash: md5
      md5: 3843ea6bb9ebafc5214c71f89dce0318
      size: 8326
  train:
    cmd: python src/models/train.py
    deps:
    - path: data/processed/train_trans.csv
      hash: md5
      md5: faaac3c5b94a404e2288070427b041f5
      size: 4675159
    - path: src/models/train.py
      hash: md5
      md5: d7e4aae3760ef7d5fc604b033c683114
      size: 4773
    params:
      params.yaml:
        Train.LightGBM:
          n_estimators: 78
          max_depth: 28
          learning_rate: 0.2658866008990233
          subsample: 0.5287157349748149
          min_child_weight: 7
          min_split_gain: 0.008083235828674103
          reg_lambda: 83.51605012289579
          n_jobs: -1
        Train.Random_Forest:
          n_estimators: 128
          max_depth: 13
          max_features:
          min_samples_leaf: 5
          min_samples_split: 5
          max_samples: 0.7115020945504928
          criterion: squared_error
          verbose: 1
          n_jobs: -1
    outs:
    - path: models/model.joblib
      hash: md5
      md5: ea10ea03691b55996948879a4ae5e0ab
      size: 25336088
    - path: models/power_transformer.joblib
      hash: md5
      md5: 35492c285c881d0d5143b1dfcf6033d1
      size: 837
    - path: models/stacking_regressor.joblib
      hash: md5
      md5: b10073a13469b9de6d3dd944a5ad7322
      size: 25330538
  evaluation:
    cmd: python src/models/evaluation.py
    deps:
    - path: data/processed/test_trans.csv
      hash: md5
      md5: 4518a428a6d455c94fb53c5a3a5120ee
      size: 1176323
    - path: data/processed/train_trans.csv
      hash: md5
      md5: faaac3c5b94a404e2288070427b041f5
      size: 4675159
    - path: models/model.joblib
      hash: md5
      md5: ea10ea03691b55996948879a4ae5e0ab
      size: 25336088
    - path: src/models/evaluation.py
      hash: md5
      md5: d7a8415e25c6df839903965ebabb620c
      size: 6048
    outs:
    - path: run_information.json
      hash: md5
      md5: 2554df797c2f8e935d1acc068495b22e
      size: 220
  register_model:
    cmd: python src/models/register_model.py
    deps:
    - path: run_information.json
      hash: md5
      md5: 2554df797c2f8e935d1acc068495b22e
      size: 220
    - path: src/models/register_model.py
      hash: md5
      md5: 5bc1faad65e78f83cdca9956fa396e85
      size: 2110
